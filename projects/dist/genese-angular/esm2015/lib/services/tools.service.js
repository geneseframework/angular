import { Injectable } from '@angular/core';
// @dynamic
export class Tools {
    constructor() { }
    /**
     * clone object with deep copy
     */
    static clone(model) {
        if (model) {
            if (Array.isArray(model)) {
                const newArray = [];
                model.forEach(item => newArray.push(this.clone(item)));
                return newArray;
            }
            else if (typeof model === 'object') {
                const newObject = {};
                Object.keys(model).forEach(key => newObject[key] = this.clone(model[key]));
                return newObject;
            }
            else {
                return model;
            }
        }
        else {
            return model;
        }
    }
    /**
     * Check if an object is a primitive or not
     */
    static isPrimitive(target) {
        return typeof target === 'string'
            || typeof target === 'number'
            || typeof target === 'boolean';
    }
    /**
     * Returns a value by default if value to check doesn't exists
     */
    static default(valueToCheck, valueByDefault) {
        return valueToCheck ? valueToCheck : valueByDefault;
    }
    /**
     * Check if two objects have the same values for every key
     */
    static isSameObject(obj1, obj2) {
        if (obj1 === obj2) {
            return true;
        }
        if (typeof obj1 === 'number' && obj1.toString() === obj2.toString()) {
            return true;
        }
        if ((obj1 === undefined || obj2 === undefined)
            || (Array.isArray(obj1) && !Array.isArray(obj2))
            || (!Array.isArray(obj1) && Array.isArray(obj2))
            || (Array.isArray(obj1) && Array.isArray(obj2) && obj1.length !== obj2.length)) {
            return false;
        }
        if (Array.isArray(obj1) && Array.isArray(obj2)) {
            let index = 0;
            for (const element of obj1) {
                if (!this.isSameObject(element, obj2[index])) {
                    return false;
                }
                index++;
            }
            return true;
        }
        else {
            for (const key of Object.keys(obj1)) {
                if ((!obj2[key] && !!obj1[key]) || (!!obj2[key] && !obj1[key])) {
                    return false;
                }
                if (Array.isArray(obj1[key])) {
                    if (!this.isSameObject(obj1[key], obj2[key])) {
                        return false;
                    }
                }
                else {
                    if (typeof obj1[key] === 'object') {
                        if (!this.isSameObject(obj1[key], obj2[key])) {
                            return false;
                        }
                    }
                    else {
                        if (obj1[key] && obj2[key] && obj1[key].toString() !== obj2[key].toString()) {
                            return false;
                        }
                    }
                }
            }
        }
        return true;
    }
    // --------------------------------------------------
    //                  REQUEST METHODS
    // --------------------------------------------------
    static isPath(str) {
        return /^\/[-a-zA-Z0-9@:%.{}_+~#=]?/.test(str);
    }
    /**
     * Get the root path of the api
     */
    static apiRoot(rootApi, path, id) {
        const url = path ? rootApi + path : rootApi;
        return id ? `${url}/${id}` : url;
    }
    /**
     * Check if the id is correct
     */
    static checkId(id) {
        if (!id || !(+id > 0)) {
            throw Error('Incorrect Genese id.');
        }
    }
    /**
     * Check if the path is correct
     */
    static checkPath(path) {
        if (!path || typeof path !== 'string') {
            throw Error('Incorrect Genese path.');
        }
    }
}
Tools.decorators = [
    { type: Injectable }
];
Tools.ctorParameters = () => [];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9vbHMuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL2dlbmVzZS9hbmd1bGFyL3NyYy9saWIvc2VydmljZXMvdG9vbHMuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRTNDLFdBQVc7QUFFWCxNQUFNLE9BQU8sS0FBSztJQUdkLGdCQUFnQixDQUFDO0lBR2pCOztPQUVHO0lBQ0gsTUFBTSxDQUFDLEtBQUssQ0FBQyxLQUFVO1FBQ25CLElBQUksS0FBSyxFQUFFO1lBQ1AsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFO2dCQUN0QixNQUFNLFFBQVEsR0FBRyxFQUFFLENBQUM7Z0JBQ3BCLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUN2RCxPQUFPLFFBQVEsQ0FBQzthQUNuQjtpQkFBTSxJQUFJLE9BQU8sS0FBSyxLQUFLLFFBQVEsRUFBRTtnQkFDbEMsTUFBTSxTQUFTLEdBQUcsRUFBRSxDQUFDO2dCQUNyQixNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQzNFLE9BQU8sU0FBUyxDQUFDO2FBQ3BCO2lCQUFNO2dCQUNILE9BQU8sS0FBSyxDQUFDO2FBQ2hCO1NBQ0o7YUFBTTtZQUNILE9BQU8sS0FBSyxDQUFDO1NBQ2hCO0lBQ0wsQ0FBQztJQUdEOztPQUVHO0lBQ0gsTUFBTSxDQUFDLFdBQVcsQ0FBQyxNQUFXO1FBQzFCLE9B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ICdAYW5ndWxhci9jb3JlJztcblxuLy8gQGR5bmFtaWNcbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBUb29scyB7XG5cblxuICAgIGNvbnN0cnVjdG9yKCkgeyB9XG5cblxuICAgIC8qKlxuICAgICAqIGNsb25lIG9iamVjdCB3aXRoIGRlZXAgY29weVxuICAgICAqL1xuICAgIHN0YXRpYyBjbG9uZShtb2RlbDogYW55KTogYW55IHtcbiAgICAgICAgaWYgKG1vZGVsKSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShtb2RlbCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdBcnJheSA9IFtdO1xuICAgICAgICAgICAgICAgIG1vZGVsLmZvckVhY2goaXRlbSA9PiBuZXdBcnJheS5wdXNoKHRoaXMuY2xvbmUoaXRlbSkpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2RlbCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdPYmplY3QgPSB7fTtcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhtb2RlbCkuZm9yRWFjaChrZXkgPT4gbmV3T2JqZWN0W2tleV0gPSB0aGlzLmNsb25lKG1vZGVsW2tleV0pKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3T2JqZWN0O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbW9kZWw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbW9kZWw7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGFuIG9iamVjdCBpcyBhIHByaW1pdGl2ZSBvciBub3RcbiAgICAgKi9cbiAgICBzdGF0aWMgaXNQcmltaXRpdmUodGFyZ2V0OiBhbnkpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICB8fCB0eXBlb2YgdGFyZ2V0ID09PSAnbnVtYmVyJ1xuICAgICAgICAgICAgfHwgdHlwZW9mIHRhcmdldCA9PT0gJ2Jvb2xlYW4nO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHZhbHVlIGJ5IGRlZmF1bHQgaWYgdmFsdWUgdG8gY2hlY2sgZG9lc24ndCBleGlzdHNcbiAgICAgKi9cbiAgICBzdGF0aWMgZGVmYXVsdCh2YWx1ZVRvQ2hlY2ssIHZhbHVlQnlEZWZhdWx0KTogYW55IHtcbiAgICAgICAgcmV0dXJuIHZhbHVlVG9DaGVjayA/IHZhbHVlVG9DaGVjayA6IHZhbHVlQnlEZWZhdWx0O1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgdHdvIG9iamVjdHMgaGF2ZSB0aGUgc2FtZSB2YWx1ZXMgZm9yIGV2ZXJ5IGtleVxuICAgICAqL1xuICAgIHN0YXRpYyBpc1NhbWVPYmplY3Qob2JqMTogYW55LCBvYmoyOiBhbnkpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKG9iajEgPT09IG9iajIpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygb2JqMSA9PT0gJ251bWJlcicgJiYgb2JqMS50b1N0cmluZygpID09PSBvYmoyLnRvU3RyaW5nKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIChvYmoxID09PSB1bmRlZmluZWQgfHwgb2JqMiA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgfHwgKEFycmF5LmlzQXJyYXkob2JqMSkgJiYgIUFycmF5LmlzQXJyYXkob2JqMikpXG4gICAgICAgICAgICB8fCAoIUFycmF5LmlzQXJyYXkob2JqMSkgJiYgQXJyYXkuaXNBcnJheShvYmoyKSlcbiAgICAgICAgICAgIHx8IChBcnJheS5pc0FycmF5KG9iajEpICYmIEFycmF5LmlzQXJyYXkob2JqMikgJiYgb2JqMS5sZW5ndGggIT09IG9iajIubGVuZ3RoKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvYmoxKSAmJiBBcnJheS5pc0FycmF5KG9iajIpKSB7XG4gICAgICAgICAgICBsZXQgaW5kZXggPSAwO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIG9iajEpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNTYW1lT2JqZWN0KGVsZW1lbnQsIG9iajJbaW5kZXhdKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKG9iajEpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCghb2JqMltrZXldICYmICEhb2JqMVtrZXldKSB8fCAoISFvYmoyW2tleV0gJiYgIW9iajFba2V5XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvYmoxW2tleV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc1NhbWVPYmplY3Qob2JqMVtrZXldLCBvYmoyW2tleV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iajFba2V5XSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc1NhbWVPYmplY3Qob2JqMVtrZXldLCBvYmoyW2tleV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iajFba2V5XSAmJiBvYmoyW2tleV0gJiYgb2JqMVtrZXldLnRvU3RyaW5nKCkgIT09IG9iajJba2V5XS50b1N0cmluZygpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG5cblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gICAgICAgICAgICAgICAgICBSRVFVRVNUIE1FVEhPRFNcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cblxuXG4gICAgc3RhdGljIGlzUGF0aChzdHI6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gL15cXC9bLWEtekEtWjAtOUA6JS57fV8rfiM9XT8vLnRlc3Qoc3RyKTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcm9vdCBwYXRoIG9mIHRoZSBhcGlcbiAgICAgKi9cbiAgICBzdGF0aWMgYXBpUm9vdChyb290QXBpOiBzdHJpbmcsIHBhdGg/OiBzdHJpbmcsIGlkPzogc3RyaW5nLCApOiBzdHJpbmcge1xuICAgICAgICBjb25zdCB1cmwgPSBwYXRoID8gcm9vdEFwaSArIHBhdGggOiByb290QXBpO1xuICAgICAgICByZXR1cm4gaWQgPyBgJHt1cmx9LyR7aWR9YCA6IHVybDtcbiAgICB9XG5cblxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgdGhlIGlkIGlzIGNvcnJlY3RcbiAgICAgKi9cbiAgICBzdGF0aWMgY2hlY2tJZChpZDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGlmICghaWQgfHwgISgraWQgPiAwKSkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0luY29ycmVjdCBHZW5lc2UgaWQuJyk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIHRoZSBwYXRoIGlzIGNvcnJlY3RcbiAgICAgKi9cbiAgICBzdGF0aWMgY2hlY2tQYXRoKHBhdGg6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAoIXBhdGggfHwgdHlwZW9mIHBhdGggIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcignSW5jb3JyZWN0IEdlbmVzZSBwYXRoLicpO1xuICAgICAgICB9XG4gICAgfVxufVxuIl19